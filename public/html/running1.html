<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corrida 360</title>
    <!--<link rel='stylesheet' href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css'>-->
    <link rel="stylesheet" type="text/css" href="../styles/video.css">
</head>
<body>
    <header>
        <iframe id="video" width="100%" height="100%" alt="Vídeo 360" src="https://www.youtube.com/embed/OI0oKS0HFiE?enablejsapi=1&html5=1&controls=0&showinfo=0&autoplay=1&rel=0&mute=1" 
        frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p id="overlayDesktop" style="z-index: 0; text-align: center; font-size: 20px;">
            Gire a tela para uma melhor experiência
        </p>
        <audio id="music" autoplay>
            <source src="../musics/Labrinth - Still Don’t Know My Name.mp3" type="mp3">
        </audio>
        <section class="rectangle"> 
            <a href="running.html"> <button id="overlayDesktop" style="z-index: 0; text-align: center;"> <img class="icons" src="../icons/return.svg" title="RETORNAR"></button></a>
            <a href="running.html"> <button class="overlayMobile" class="buttons"> <img class="icons" src="../icons/return.svg" title="RETORNAR"></button></a>
            <button id="play-button" class="overlayMobile"><img class="icons" src="../icons/play.svg" title="REPRODUZIR"></button>
            <button id="pause-button" class="overlayMobile"><img class="icons" src="../icons/pause.svg" title="PAUSAR"></button>
            <button id="stop-button" class="overlayMobile"><img class="icons" src="../icons/restart.svg" title="REINICIAR"></button>
            <button onclick="getPlayVelocity()" type="button" class="overlayMobile"><img class="icons" src="../icons/velocity.svg" title="VELOCIDADE"></button>

            
            <input type="button" id="button" onclick="setInterval(nameChoose, 2000);" value="Speed" class="overlayMobile"/>

            <button onclick="setPlaySlow()" type="button" class="overlayMobile"><img class="icons" src="../icons/turtle.svg" title="LENTO"></button>
            <button onclick="setPlayFast()" type="button" class="overlayMobile"><img class="icons" src="../icons/fast.svg" title="RÁPIDO"></button>
            <!--<button class="overlayMobile">
                <a onclick="playShow()" id="music-play"><i class="ion-ios-musical-notes" title="MÚSICA"></i></a> 
                <a id="music-pause" onclick="pauseShow()" style="display:none;"><i class="ion-ios-musical-notes"></i></a>
            </button>-->

            <button onclick="document.getElementById('music').play()" type="button" class="overlayMobile"><img src="../icons/music.svg" title='MÚSICA'></button>
            <button onclick="document.getElementById('music').pause()" type="button" class="overlayMobile"><img src="../icons/music.svg" title='MÚSICA'></button>
    
            <a href="running2.html"><button class="overlayMobile"><img class="icons" src="../icons/next.svg" title="PRÓXIMO VÍDEO"></button></a>
            <!--<button class= "buttons" onclick="setPlayNormal()" type="button">1.0x</button><br> -->
        </section>
        
   

        <script>
            //Injetar script da API do YouTube
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            //Variável global
            var player;
            //Essa função é chamada quando a API está pronta para uso
            function onYouTubePlayerAPIReady() {
                //crie o player global a partir do iframe específico (#video)
                player = new YT.Player('video', {
                    events: {
                        //Chame esta função quando o player estiver pronto para usar
                        'onReady': onPlayerReady
                    }
                });
            }
            function onPlayerReady(event) {
                var playButton = document.getElementById("play-button");
                playButton.addEventListener("click", function() {
                    player.playVideo();
                });
                var pauseButton = document.getElementById("pause-button");
                pauseButton.addEventListener("click", function() {
                    player.pauseVideo();
                });
                var stopButton = document.getElementById("stop-button");
                stopButton.addEventListener("click", function() {
                    player.stopVideo();
                });
            }
            function getPlayVelocity() {   
                alert("Sua velocidade é " + player.getPlaybackRate());
                console.log(player.getPlaybackRate()); 
            } 
            function setPlaySlow() { 
                let playRate = player.getPlaybackRate() > 0.5? player.getPlaybackRate()/2:  0.5; 
                player.setPlaybackRate(playRate);
            } 
            function setPlayFast(){
                let playRate =  player.getPlaybackRate()+0.5; 
                player.setPlaybackRate(playRate);
            }
            function setPlayNormal(){
                let playRate = 1.0;
                player.setPlaybackRate(playRate);
            }   

            function nameChoose() {
                var number = Math.floor(Math.random() * 101);

                if(document.getElementById("button").value == "") {
                    document.getElementById("button").value = number;
                } else {
                    document.getElementById("button").value = number;
                }
            }

             /*//audio control
            var musicAudio = document.getElementById('music-audio');
            var playBtn = document.getElementById('music-play');
            var pauseBtn = document.getElementById('music-pause');

            var playShow = function() {
                musicAudio.play();
                playBtn.style.display = "none";
                pauseBtn.style.display = "inline-block";
            };
            var pauseShow = function() {
                musicAudio.pause();
                playBtn.style.display = "inline-block";
                pauseBtn.style.display = "none";
            };
            <video id="video" preload="none" src="https://example.com/file.mp4"></video>
 

            // Show loading animation.
            var playPromise = video.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                // Automatic playback started!
                // Show playing UI.
                // We can now safely pause video...
                video.pause();
                })
                .catch(error => {
                // Auto-play was prevented
                // Show paused UI.
                });
            }

           
            // Initializing values
            var isPlaying = true;

            // On video playing toggle values
            video.onplaying = function() {
                isPlaying = true;
            };

            // On video pause toggle values
            video.onpause = function() {
                isPlaying = false;
            };

            // Play video function
            function playVid() {      
                if (video.paused && !isPlaying) {
                    video.play();
                }
            } 

            // Pause video function
            function pauseVid() {     
                if (!video.paused && isPlaying) {
                    video.pause();
                }
            }*/
        </script>
    </header>
</body>
</html>